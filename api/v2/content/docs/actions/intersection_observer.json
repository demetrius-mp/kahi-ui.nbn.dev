{"data":{"properties":{"created_at":1633108516000,"custom_properties":{},"events":{},"identifier":"actions/intersection_observer","modified_at":1633108516000,"properties":{},"sections":[{"identifier":"intersection_observer","level":1,"text":"intersection_observer"},{"identifier":"imports","level":2,"text":"Imports"},{"identifier":"compatibility","level":2,"text":"Compatibility"}],"slots":{},"snippets":[{"identifier":"intersection_observer-preview","script":"<script>\n    import {\n        Box,\n        Code,\n        Spacer,\n        Transition,\n        intersection_observer,\n    } from \"@kahi-ui/framework\";\n\n    let is_intersecting = false;\n</script>\n\n<Spacer spacing=\"huge\" />\n<Spacer spacing=\"huge\" />\n\n<Spacer spacing=\"huge\" />\n<Spacer spacing=\"huge\" />\n\n<Box\n    palette={is_intersecting\n        ? \"affirmative\"\n        : \"negative\"}\n    padding=\"small\"\n>\n    Scroll down to watch this <Code>Box</Code> change when\n    the <Code>Box</Code> comes into view.\n</Box>\n\n<Spacer spacing=\"huge\" />\n<Spacer spacing=\"huge\" />\n\n<Spacer spacing=\"huge\" />\n<Spacer spacing=\"huge\" />\n\n<Spacer spacing=\"huge\" />\n<Spacer spacing=\"huge\" />\n\n<div\n    class=\"intersection-observer-preview\"\n    use:intersection_observer={{\n        threshold: 0.5,\n        on_intersect: (intersections) => {\n            console.log(\"on_intersect\", {\n                intersections,\n            });\n\n            is_intersecting = intersections.some(\n                (intersection) =>\n                    intersection.isIntersecting\n            );\n        },\n    }}\n>\n    {#if is_intersecting}\n        <Transition\n            animation=\"scale\"\n            variation=\"enter\"\n        >\n            <Box\n                class=\"intersection-observer-preview\"\n                palette=\"inverse\"\n                padding=\"small\">I am in view!</Box\n            >\n        </Transition>\n    {/if}\n</div>\n\n<Spacer spacing=\"huge\" />\n<Spacer spacing=\"huge\" />\n\n<Spacer spacing=\"huge\" />\n<Spacer spacing=\"huge\" />\n\n<Spacer spacing=\"huge\" />\n<Spacer spacing=\"huge\" />\n\n<Box\n    palette={is_intersecting\n        ? \"affirmative\"\n        : \"negative\"}\n    padding=\"small\"\n>\n    Scroll up to watch this <Code>Box</Code> change when\n    the <Code>Box</Code> comes into view.\n</Box>\n\n<Spacer spacing=\"huge\" />\n<Spacer spacing=\"huge\" />\n\n<Spacer spacing=\"huge\" />\n<Spacer spacing=\"huge\" />\n\n<style>\n    :global(.intersection-observer-preview) {\n        height: 40px;\n    }\n</style>","syntax":"svelte","title":"intersection_observer Preview"},{"identifier":"imports","script":"import {intersection_observer} from \"@kahi-ui/framework\";","syntax":"javascript","title":"Imports"}],"title":"intersection_observer"},"render":"<h1 id=\"intersection_observer\">intersection_observer</h1>\n<p><code>intersection_observer</code> is a <a href=\"https://svelte.dev/docs#use_action\" target=\"_blank\" rel=\"noopener noreferrer\">Svelte Action</a>, which runs a <code>on_intersect(intersections: IntersectionObserverEntry[]): void</code> callback whenever the targetted element intersects the root viewport.</p>\n<blockquote data-palette=\"accent\">\n<p><strong>NOTE</strong>: The below REPL basically reimplements <a href=\"../utilities/intersectionrender\">IntersectionRender</a>.</p>\n</blockquote>\n<iframe\n    class=\"snippet-repl\"\n    src=\"/repl/docs/actions/intersection_observer/intersection_observer-preview?rotation=horizontal\"\n    sandbox=\"allow-popups-to-escape-sandbox allow-scripts allow-popups allow-forms allow-pointer-lock allow-top-navigation allow-modals allow-same-origin\" loading=\"lazy\"\n></iframe>\n<a href=\"/repl/docs/actions/intersection_observer/intersection_observer-preview?rotation=horizontal\" hidden sveltekit:prefetch></a><h2 id=\"imports\">Imports</h2>\n<pre class=\"language-javascript snippet-highlight\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>intersection_observer<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@kahi-ui/framework\"</span><span class=\"token punctuation\">;</span></code></pre><h2 id=\"compatibility\">Compatibility</h2>\n<p>Svelte Actions are always ran on the Browser only with Javascript is enabled. So should not be used for critical end-user functionality, only progressive enhancement. The Action is dependent on <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver\" target=\"_blank\" rel=\"noopener noreferrer\"><code>IntersectionObserver</code></a>.</p>\n"}}