import{S as se,i as ie,s as le,e as Z,c as G,a as Y,d as B,b as O,f as J,W as ae,K as Q,ah as oe,t as re,g as ce,h as de,b0 as fe,l as v,b1 as ue}from"./vendor-ec7aa2c0.js";const he=typeof window!="undefined"?window:void 0;function ge(n,i,l={}){const o=Object.assign({tab:"	",indentOn:/{$/,spellcheck:!1,catchTab:!0,preserveIdent:!0,addClosing:!0,history:!0,window:he},l),a=o.window,h=a.document;let p=[],f=[],c=-1,y=!1,w,A;n.setAttribute("contenteditable","plaintext-only"),n.setAttribute("spellcheck",o.spellcheck?"true":"false"),n.style.outline="none",n.style.overflowWrap="break-word",n.style.overflowY="auto",n.style.whiteSpace="pre-wrap";let k=!1;i(n),n.contentEditable!=="plaintext-only"&&(k=!0),k&&n.setAttribute("contenteditable","true");const D=I(()=>{const e=_();i(n,e),r(e)},30);let N=!1;const C=e=>!z(e)&&!V(e)&&e.key!=="Meta"&&e.key!=="Control"&&e.key!=="Alt"&&!e.key.startsWith("Arrow"),F=I(e=>{C(e)&&(j(),N=!1)},300),S=(e,t)=>{p.push([e,t]),n.addEventListener(e,t)};S("keydown",e=>{e.defaultPrevented||(A=P(),o.preserveIdent?U(e):x(e),o.catchTab&&$(e),o.addClosing&&T(e),o.history&&(ee(e),C(e)&&!N&&(j(),N=!0)),k&&r(_()))}),S("keyup",e=>{e.defaultPrevented||e.isComposing||(A!==P()&&D(),F(e),w&&w(P()))}),S("focus",e=>{y=!0}),S("blur",e=>{y=!1}),S("paste",e=>{j(),te(e),j(),w&&w(P())});function _(){const e=K(),t={start:0,end:0,dir:void 0};let{anchorNode:s,anchorOffset:d,focusNode:u,focusOffset:m}=e;if(!s||!u)throw"error1";if(s.nodeType===Node.ELEMENT_NODE){const g=h.createTextNode("");s.insertBefore(g,s.childNodes[d]),s=g,d=0}if(u.nodeType===Node.ELEMENT_NODE){const g=h.createTextNode("");u.insertBefore(g,u.childNodes[m]),u=g,m=0}return W(n,g=>{if(g===s&&g===u)return t.start+=d,t.end+=m,t.dir=d<=m?"->":"<-","stop";if(g===s)if(t.start+=d,!t.dir)t.dir="->";else return"stop";else if(g===u)if(t.end+=m,!t.dir)t.dir="<-";else return"stop";g.nodeType===Node.TEXT_NODE&&(t.dir!="->"&&(t.start+=g.nodeValue.length),t.dir!="<-"&&(t.end+=g.nodeValue.length))}),n.normalize(),t}function r(e){const t=K();let s,d=0,u,m=0;if(e.dir||(e.dir="->"),e.start<0&&(e.start=0),e.end<0&&(e.end=0),e.dir=="<-"){const{start:b,end:H}=e;e.start=H,e.end=b}let g=0;W(n,b=>{if(b.nodeType!==Node.TEXT_NODE)return;const H=(b.nodeValue||"").length;if(g+H>e.start&&(s||(s=b,d=e.start-g),g+H>e.end))return u=b,m=e.end-g,"stop";g+=H}),s||(s=n,d=n.childNodes.length),u||(u=n,m=n.childNodes.length),e.dir=="<-"&&([s,d,u,m]=[u,m,s,d]),t.setBaseAndExtent(s,d,u,m)}function E(){const t=K().getRangeAt(0),s=h.createRange();return s.selectNodeContents(n),s.setEnd(t.startContainer,t.startOffset),s.toString()}function M(){const t=K().getRangeAt(0),s=h.createRange();return s.selectNodeContents(n),s.setStart(t.endContainer,t.endOffset),s.toString()}function U(e){if(e.key==="Enter"){const t=E(),s=M();let[d]=X(t),u=d;if(o.indentOn.test(t)&&(u+=o.tab),u.length>0?(L(e),e.stopPropagation(),R(`
`+u)):x(e),u!==d&&s[0]==="}"){const m=_();R(`
`+d),r(m)}}}function x(e){if(k&&e.key==="Enter")if(L(e),e.stopPropagation(),M()==""){R(`
 `);const t=_();t.start=--t.end,r(t)}else R(`
`)}function T(e){const t=`([{'"`,s=`)]}'"`,d=M(),u=E(),m=u.substr(u.length-1)==="\\",g=d.substr(0,1);if(s.includes(e.key)&&!m&&g===e.key){const b=_();L(e),b.start=++b.end,r(b)}else if(t.includes(e.key)&&!m&&(`"'`.includes(e.key)||[""," ",`
`].includes(g))){L(e);const b=_(),H=b.start==b.end?"":K().toString(),ne=e.key+H+s[t.indexOf(e.key)];R(ne),b.start++,b.end++,r(b)}}function $(e){if(e.key==="Tab")if(L(e),e.shiftKey){const t=E();let[s,d]=X(t);if(s.length>0){const u=_(),m=Math.min(o.tab.length,s.length);r({start:d,end:d+m}),h.execCommand("delete"),u.start-=m,u.end-=m,r(u)}}else R(o.tab)}function ee(e){if(z(e)){L(e),c--;const t=f[c];t&&(n.innerHTML=t.html,r(t.pos)),c<0&&(c=0)}if(V(e)){L(e),c++;const t=f[c];t&&(n.innerHTML=t.html,r(t.pos)),c>=f.length&&c--}}function j(){if(!y)return;const e=n.innerHTML,t=_(),s=f[c];if(s&&s.html===e&&s.pos.start===t.start&&s.pos.end===t.end)return;c++,f[c]={html:e,pos:t},f.splice(c+1);const d=300;c>d&&(c=d,f.splice(0,1))}function te(e){L(e);const t=(e.originalEvent||e).clipboardData.getData("text/plain").replace(/\r/g,""),s=_();R(t),i(n),r({start:s.start+t.length,end:s.start+t.length})}function W(e,t){const s=[];e.firstChild&&s.push(e.firstChild);let d=s.pop();for(;d&&t(d)!=="stop";)d.nextSibling&&s.push(d.nextSibling),d.firstChild&&s.push(d.firstChild),d=s.pop()}function q(e){return e.metaKey||e.ctrlKey}function z(e){return q(e)&&!e.shiftKey&&e.code==="KeyZ"}function V(e){return q(e)&&e.shiftKey&&e.code==="KeyZ"}function R(e){e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),h.execCommand("insertHTML",!1,e)}function I(e,t){let s=0;return(...d)=>{clearTimeout(s),s=a.setTimeout(()=>e(...d),t)}}function X(e){let t=e.length-1;for(;t>=0&&e[t]!==`
`;)t--;t++;let s=t;for(;s<e.length&&/[ \t]/.test(e[s]);)s++;return[e.substring(t,s)||"",t,s]}function P(){return n.textContent||""}function L(e){e.preventDefault()}function K(){var e;return((e=n.parentNode)===null||e===void 0?void 0:e.nodeType)==Node.DOCUMENT_FRAGMENT_NODE?n.parentNode.getSelection():a.getSelection()}return{updateOptions(e){Object.assign(o,e)},updateCode(e){n.textContent=e,i(n)},onUpdate(e){w=e},toString:P,save:_,restore:r,recordHistory:j,destroy(){for(let[e,t]of p)n.removeEventListener(e,t)}}}function ye(n,i={}){const l=Object.assign({class:"codejar-linenumbers",wrapClass:"codejar-wrap",width:"35px",backgroundColor:"rgba(128, 128, 128, 0.15)",color:""},i);let o;return function(a){n(a),o||(o=me(a,l),a.addEventListener("scroll",()=>o.style.top=`-${a.scrollTop}px`));const p=(a.textContent||"").replace(/\n+$/,`
`).split(`
`).length+1;let f="";for(let c=1;c<p;c++)f+=`${c}
`;o.innerText=f}}function me(n,i){const l=getComputedStyle(n),o=document.createElement("div");o.className=i.wrapClass,o.style.position="relative";const a=document.createElement("div");a.className=i.class,o.appendChild(a),a.style.position="absolute",a.style.top="0px",a.style.left="0px",a.style.bottom="0px",a.style.width=i.width,a.style.overflow="hidden",a.style.backgroundColor=i.backgroundColor,a.style.color=i.color||l.color,a.style.setProperty("mix-blend-mode","difference"),a.style.fontFamily=l.fontFamily,a.style.fontSize=l.fontSize,a.style.lineHeight=l.lineHeight,a.style.paddingTop=l.paddingTop,a.style.paddingLeft=l.paddingLeft,a.style.borderTopLeftRadius=l.borderTopLeftRadius,a.style.borderBottomLeftRadius=l.borderBottomLeftRadius;const h=document.createElement("div");return h.style.position="relative",h.style.top="0px",a.appendChild(h),n.style.paddingLeft=`calc(${i.width} + ${a.style.paddingLeft})`,n.style.whiteSpace="pre",n.parentNode.insertBefore(o,n),o.appendChild(n),h}function be(n){let i;return{c(){i=re(n[1])},l(l){i=ce(l,n[1])},m(l,o){J(l,i,o)},p(l,o){o&2&&de(i,l[1])},d(l){l&&B(i)}}}function pe(n){let i,l=n[4](n[1],n[5])+"",o;return{c(){i=new fe,o=v(),this.h()},l(a){i=ue(a),o=v(),this.h()},h(){i.a=o},m(a,h){i.m(l,a,h),J(a,o,h)},p(a,h){h&50&&l!==(l=a[4](a[1],a[5])+"")&&i.p(l)},d(a){a&&B(o),a&&i.d()}}}function Ce(n){let i,l,o,a;function h(c,y){return!c[6]&&c[4]?pe:be}let p=h(n),f=p(n);return{c(){i=Z("pre"),l=Z("code"),f.c(),this.h()},l(c){i=G(c,"PRE",{class:!0,style:!0});var y=Y(i);l=G(y,"CODE",{class:!0,"data-language":!0});var w=Y(l);f.l(w),w.forEach(B),y.forEach(B),this.h()},h(){O(l,"class",o=n[5]?`language-${n[5]}`:""),O(l,"data-language",n[5]),O(i,"class",a=""+((n[5]?`language-${n[5]}`:"")+" "+n[2])),O(i,"style",n[3])},m(c,y){J(c,i,y),ae(i,l),f.m(l,null),n[13](i)},p(c,[y]){p===(p=h(c))&&f?f.p(c,y):(f.d(1),f=p(c),f&&(f.c(),f.m(l,null))),y&32&&o!==(o=c[5]?`language-${c[5]}`:"")&&O(l,"class",o),y&32&&O(l,"data-language",c[5]),y&36&&a!==(a=""+((c[5]?`language-${c[5]}`:"")+" "+c[2]))&&O(i,"class",a),y&8&&O(i,"style",c[3])},i:Q,o:Q,d(c){c&&B(i),f.d(),n[13](null)}}}function we(n,i,l){let{element:o=null}=i,{class:a=""}=i,{style:h=void 0}=i,{addClosing:p=!0}=i,{indentOn:f=/{$/}=i,{spellcheck:c=!1}=i,{tab:y="	"}=i,{withLineNumbers:w=!1}=i,{highlightCode:A=null}=i,{highlightElement:k=(r,E)=>{}}=i,{syntax:D=void 0}=i,{value:N=""}=i,C=null;function F(){C.destroy();const r=o.parentElement;if(r.classList.contains("codejar-wrap")){const E=r.parentElement;l(0,o.style.padding="",o),E.appendChild(o),r.remove()}}function S(r,E,M,U){C&&F();const x=M?ye(T=>E(T,U)):T=>E(T,U);l(6,C=ge(r,x,{addClosing:p,indentOn:f,spellcheck:c,tab:y})),C.onUpdate(T=>{T!==N&&l(1,N=T)})}function _(r){oe[r?"unshift":"push"](()=>{o=r,l(0,o)})}return n.$$set=r=>{"element"in r&&l(0,o=r.element),"class"in r&&l(2,a=r.class),"style"in r&&l(3,h=r.style),"addClosing"in r&&l(7,p=r.addClosing),"indentOn"in r&&l(8,f=r.indentOn),"spellcheck"in r&&l(9,c=r.spellcheck),"tab"in r&&l(10,y=r.tab),"withLineNumbers"in r&&l(11,w=r.withLineNumbers),"highlightCode"in r&&l(4,A=r.highlightCode),"highlightElement"in r&&l(12,k=r.highlightElement),"syntax"in r&&l(5,D=r.syntax),"value"in r&&l(1,N=r.value)},n.$$.update=()=>{n.$$.dirty&6177&&o&&S(o,k,w,D),n.$$.dirty&1984&&C&&C.updateOptions({addClosing:p,indentOn:f,spellcheck:c,tab:y}),n.$$.dirty&66&&C&&C.toString()!==N&&C.updateCode(N)},[o,N,a,h,A,D,C,p,f,c,y,w,k,_]}class _e extends se{constructor(i){super();ie(this,i,we,Ce,le,{element:0,class:2,style:3,addClosing:7,indentOn:8,spellcheck:9,tab:10,withLineNumbers:11,highlightCode:4,highlightElement:12,syntax:5,value:1})}}var Ee=_e;export{Ee as CodeJar};
