import{S as u,i as d,s as m,v as l,w as f,x as v,D as _,p as h,n as j,A as b}from"../../../chunks/vendor-3e57bd21.js";import{d as k}from"../../../chunks/preferences-7365be71.js";import{R as E}from"../../../chunks/REPLEmbed-4a4948d7.js";import"../../../chunks/REPLSplit-788c0a20.js";import"../../../chunks/preload-helper-ec9aa979.js";import"../../../chunks/Code-91d66eaf.js";function g(i){let t,s;return t=new E({props:{identifier:i[0],value:i[1]}}),{c(){l(t.$$.fragment)},l(e){f(t.$$.fragment,e)},m(e,n){v(t,e,n),s=!0},p:_,i(e){s||(h(t.$$.fragment,e),s=!0)},o(e){j(t.$$.fragment,e),s=!1},d(e){b(t,e)}}}const x=async({fetch:i})=>{const t=new URLSearchParams(location.search),{script:s="",snippet:e=""}=Object.fromEntries(t.entries());if(e){const n=await i(`/api/v4/snippets/${e}.json`);if(!n.ok){const r=await n.json();return{status:n.status,error:r.code}}return{props:{snippet:(await n.json()).data}}}else if(s)return{props:{script:k(s)}};return{status:404,error:"MissingScript"}};function w(i,t,s){var e,n;let{script:a}=t,{snippet:r}=t;const c=r==null?void 0:r.identifier;let p=(n=(e=r==null?void 0:r.script)!==null&&e!==void 0?e:a)!==null&&n!==void 0?n:"";return i.$$set=o=>{"script"in o&&s(2,a=o.script),"snippet"in o&&s(3,r=o.snippet)},[c,p,a,r]}class C extends u{constructor(t){super();d(this,t,w,g,m,{script:2,snippet:3})}}export{C as default,x as load};
