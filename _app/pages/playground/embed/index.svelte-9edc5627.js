import{S as u,i as d,s as m,j as l,m as f,o as v,D as _,x as j,u as b,v as h}from"../../../chunks/vendor-456a71e0.js";import{d as g}from"../../../chunks/preferences-b73dc8a9.js";import{R as k}from"../../../chunks/REPLEmbed-5ebdbda6.js";import"../../../chunks/REPLSplit-3b622865.js";import"../../../chunks/preload-helper-ec9aa979.js";import"../../../chunks/Code-21929627.js";function E(a){let t,s;return t=new k({props:{identifier:a[0],value:a[1]}}),{c(){l(t.$$.fragment)},l(e){f(t.$$.fragment,e)},m(e,r){v(t,e,r),s=!0},p:_,i(e){s||(j(t.$$.fragment,e),s=!0)},o(e){b(t.$$.fragment,e),s=!1},d(e){h(t,e)}}}const x=async({fetch:a,page:t})=>{const s=new URLSearchParams(location.search),{script:e="",snippet:r=""}=Object.fromEntries(s.entries());if(r){const i=await a(`/api/v4/snippets/${r}.json`);if(!i.ok){const c=await i.json();return{status:i.status,error:c.code}}return{props:{snippet:(await i.json()).data}}}else if(e)return{props:{script:g(e)}};return{status:404,error:"MissingScript"}};function w(a,t,s){var e,r;let{script:i}=t,{snippet:n}=t;const c=n==null?void 0:n.identifier;let p=(r=(e=n==null?void 0:n.script)!==null&&e!==void 0?e:i)!==null&&r!==void 0?r:"";return a.$$set=o=>{"script"in o&&s(2,i=o.script),"snippet"in o&&s(3,n=o.snippet)},[c,p,i,n]}class C extends u{constructor(t){super();d(this,t,w,E,m,{script:2,snippet:3})}}export{C as default,x as load};
