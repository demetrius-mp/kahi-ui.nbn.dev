import{S as v,i as j,s as h,l as f,f as E,x as p,u,d as $,j as m,m as d,o as _,D as b,v as k}from"../../../chunks/vendor-4f07f368.js";import{d as g}from"../../../chunks/preferences-2a4a2893.js";import{H as y}from"../../../chunks/HeroJavascriptEnabled-8e37a626.js";import{R as w}from"../../../chunks/REPLEmbed-4960410c.js";import"../../../chunks/REPLSplit-9f001446.js";import"../../../chunks/preload-helper-ec9aa979.js";import"../../../chunks/Code-4413ab62.js";function x(a){let t,r;return t=new y({}),{c(){m(t.$$.fragment)},l(e){d(t.$$.fragment,e)},m(e,n){_(t,e,n),r=!0},p:b,i(e){r||(p(t.$$.fragment,e),r=!0)},o(e){u(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function R(a){let t,r;return t=new w({props:{identifier:a[0],value:a[1]}}),{c(){m(t.$$.fragment)},l(e){d(t.$$.fragment,e)},m(e,n){_(t,e,n),r=!0},p:b,i(e){r||(p(t.$$.fragment,e),r=!0)},o(e){u(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function S(a){let t,r,e,n;const c=[R,x],s=[];function l(i,o){return 0}return t=l(),r=s[t]=c[t](a),{c(){r.c(),e=f()},l(i){r.l(i),e=f()},m(i,o){s[t].m(i,o),E(i,e,o),n=!0},p(i,[o]){r.p(i,o)},i(i){n||(p(r),n=!0)},o(i){u(r),n=!1},d(i){s[t].d(i),i&&$(e)}}}const O=!1,z=async({fetch:a,page:t})=>{const{script:r="",snippet:e=""}=Object.fromEntries(t.query.entries());if(e){const n=await a(`/api/v4/snippets/${e}.json`);if(!n.ok){const s=await n.json();return{status:n.status,error:s.code}}return{props:{snippet:(await n.json()).data}}}else if(r)return{props:{script:g(r)}};return{status:404,error:"MissingScript"}};function H(a,t,r){var e,n;let{script:c}=t,{snippet:s}=t;const l=s==null?void 0:s.identifier;let i=(n=(e=s==null?void 0:s.script)!==null&&e!==void 0?e:c)!==null&&n!==void 0?n:"";return a.$$set=o=>{"script"in o&&r(2,c=o.script),"snippet"in o&&r(3,s=o.snippet)},[l,i,c,s]}class A extends v{constructor(t){super();j(this,t,H,S,h,{script:2,snippet:3})}}export{A as default,z as load,O as ssr};
