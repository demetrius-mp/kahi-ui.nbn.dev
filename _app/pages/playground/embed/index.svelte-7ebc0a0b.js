import{S as u,i as m,s as d,j as l,m as f,o as v,D as _,x as j,u as h,v as b}from"../../../chunks/vendor-b0241e9c.js";import{d as g}from"../../../chunks/preferences-427a9cb9.js";import{R as k}from"../../../chunks/REPLEmbed-a9576230.js";import"../../../chunks/REPLSplit-f57ada30.js";import"../../../chunks/preload-helper-ec9aa979.js";import"../../../chunks/Code-17585f45.js";function E(a){let e,s;return e=new k({props:{identifier:a[0],value:a[1]}}),{c(){l(e.$$.fragment)},l(t){f(e.$$.fragment,t)},m(t,r){v(e,t,r),s=!0},p:_,i(t){s||(j(e.$$.fragment,t),s=!0)},o(t){h(e.$$.fragment,t),s=!1},d(t){b(e,t)}}}const x=async({fetch:a,page:e})=>{const s=new URLSearchParams(location.search),{script:t="",snippet:r=""}=Object.fromEntries(s.entries());if(r){const i=await a(`/api/v4/snippets/${r}.json`);if(!i.ok){const c=await i.json();return{status:i.status,error:c.code}}return{props:{snippet:(await i.json()).data}}}else if(t)return{props:{script:g(t)}};return{status:404,error:"MissingScript"}};function w(a,e,s){var t,r;let{script:i}=e,{snippet:n}=e;const c=n==null?void 0:n.identifier;let p=(r=(t=n==null?void 0:n.script)!==null&&t!==void 0?t:i)!==null&&r!==void 0?r:"";return a.$$set=o=>{"script"in o&&s(2,i=o.script),"snippet"in o&&s(3,n=o.snippet)},[c,p,i,n]}class C extends u{constructor(e){super();m(this,e,w,E,d,{script:2,snippet:3})}}export{C as default,x as load};
